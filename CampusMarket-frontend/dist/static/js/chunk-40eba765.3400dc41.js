(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40eba765"],{"0c6b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"complaint-page"},[a("el-card",{staticClass:"filter-card",attrs:{shadow:"always"}},[a("el-form",{staticClass:"filter-form",attrs:{inline:!0,size:"small","label-width":"auto"}},[a("el-form-item",{attrs:{label:"时间范围"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchTime,callback:function(e){t.searchTime=e},expression:"searchTime"}})],1)],1)],1),a("el-card",{staticClass:"table-card",attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:t.complaints}},[a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:!0}}),a("el-table-column",{attrs:{prop:"complainantId",label:"投诉人"}}),a("el-table-column",{attrs:{prop:"targetId",label:"被投诉人"}}),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"status-text"},["rejected"===e.row.status?a("div",{staticClass:"rejected"},[t._v(" 已驳回 ")]):t._e(),"resolved"===e.row.status?a("div",{staticClass:"resolved"},[t._v(" 已通过 ")]):t._e()])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"font-size":"large"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.handle(e.row.id,"resolved",e.row.complainantId,e.row.targetId)}}},[t._v("通过")]),a("el-button",{staticStyle:{"font-size":"large"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.handle(e.row.id,"rejected",e.row.complainantId,e.row.targetId)}}},[t._v("驳回")])]}}])})],1)],1),a("div",{staticClass:"pagination-wrapper"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":[10,20],layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},l=[],r={data(){return{complaints:[],pageSize:10,currentPage:1,totalItems:0,searchTime:[]}},created(){this.fetchFreshData()},methods:{fetchFreshData(){this.$axios.get("/api/complaint/all").then(t=>{this.complaints=t.data}).catch(t=>{this.$notify.error({title:"查询操作",message:t})})},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(t){this.currentPage=t,this.fetchFreshData()},handle(t,e,a,s){this.$axios.post("/api/complaint/handle",null,{params:{id:t,status:e,complainantId:a,targetId:s}}).then(t=>{this.fetchFreshData(),this.$message.success("处理完成")}).catch(t=>{this.$notify.error({title:"修改操作",message:t})})}}},i=r,n=(a("ac77"),a("2877")),c=Object(n["a"])(i,s,l,!1,null,"ec1946dc",null);e["default"]=c.exports},9325:function(t,e,a){},ac77:function(t,e,a){"use strict";a("9325")}}]);
//# sourceMappingURL=chunk-40eba765.3400dc41.js.map