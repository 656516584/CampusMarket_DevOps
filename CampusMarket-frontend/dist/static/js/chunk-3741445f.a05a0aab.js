(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3741445f"],{"1b70":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"category-page"},[a("el-card",{staticClass:"filter-card",attrs:{shadow:"always"}},[a("el-form",{staticClass:"filter-form",attrs:{inline:!0,size:"small","label-width":"auto"}},[a("el-form-item",{attrs:{label:"类别名"}},[a("el-input",{staticStyle:{width:"166px"},attrs:{size:"small",placeholder:"商品类别名",clearable:""},on:{clear:t.handleFilterClear},model:{value:t.categoryQueryDto.name,callback:function(e){t.$set(t.categoryQueryDto,"name",e)},expression:"categoryQueryDto.name"}},[a("el-button",{staticStyle:{"background-color":"#4a90e2"},attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleFilter},slot:"append"})],1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("span",{staticClass:"edit-button",staticStyle:{"background-color":"#4a90e2"},on:{click:function(e){return t.add()}}},[t._v(" 新增类别 ")])])],1)],1),a("el-card",{staticClass:"table-card",attrs:{shadow:"hover"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:!0,data:t.tableData}},[a("el-table-column",{attrs:{prop:"id",width:"88",label:"ID",sortable:!0}}),a("el-table-column",{attrs:{prop:"name",label:"类别名"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"pagination-wrapper"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-sizes":[10,20],layout:"total, sizes, prev, pager, next, jumper",total:t.totalItems},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{"show-close":!1,visible:t.dialogCategoryOperaion,width:"18%"},on:{"update:visible":function(e){t.dialogCategoryOperaion=e}}},[a("div",{staticStyle:{padding:"16px 20px"}},[a("el-row",[a("p",[t._v("类别名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"dialog-input",attrs:{placeholder:"类别名"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})])],1),a("span",{staticClass:"dialog-footer",staticStyle:{"margin-top":"10px"},attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"channel-button",on:{click:function(e){return t.cannel()}}},[t._v(" 取消 ")]),t.isOperation?a("span",{staticClass:"edit-button",on:{click:function(e){return t.updateOperation()}}},[t._v(" 确定 ")]):a("span",{staticClass:"edit-button",on:{click:function(e){return t.addOperation()}}},[t._v(" 确定 ")])])])],1)},i=[],r={data(){return{data:{},currentPage:1,pageSize:10,totalItems:0,dialogCategoryOperaion:!1,isOperation:!1,tableData:[],delectedRows:[],categoryQueryDto:{}}},created(){this.fetchFreshData()},methods:{cannel(){this.data={},this.dialogCategoryOperaion=!1,this.isOperation=!1},async batchDelete(){if(!this.delectedRows.length)return void this.$message("未选中任何数据");const t=await this.$swalConfirm({title:"删除商品类别数据",text:"删除后不可恢复，是否继续？",icon:"warning"});if(t)try{let t=this.delectedRows.map(t=>t.id);const e=await this.$axios.post("/category/batchDelete",t);if(200===e.data.code)return this.$notify({duration:1e3,title:"信息删除",message:"删除成功",type:"success"}),void this.fetchFreshData()}catch(e){this.$message.error("商品类别信息删除异常：",e),console.error("商品类别信息删除异常：",e)}},updateOperation(){this.$axios.put("/category/update",this.data).then(t=>{const{data:e}=t;200===e.code&&(this.$notify.success({duration:1e3,title:"修改操作",message:e.msg}),this.fetchFreshData(),this.cannel())}).catch(t=>{this.$notify.error({title:"修改操作",message:t})})},addOperation(){this.$axios.post("/category/save",this.data).then(t=>{const{data:e}=t;200===e.code?(this.$notify.success({duration:1e3,title:"新增操作",message:e.msg}),this.fetchFreshData(),this.cannel()):this.$notify.info({duration:1e3,title:"新增操作",message:e.msg})}).catch(t=>{this.$notify.error({title:"新增操作",message:t})})},fetchFreshData(){this.categoryQueryDto.current=this.currentPage,this.categoryQueryDto.size=this.pageSize,this.$axios.post("/category/query",this.categoryQueryDto).then(t=>{const{data:e}=t;200===e.code&&(this.tableData=e.data,this.totalItems=e.total)}).catch(t=>{this.$notify.error({title:"查询操作",message:t})})},add(){this.dialogCategoryOperaion=!0},handleFilter(){this.currentPage=1,this.fetchFreshData()},handleFilterClear(){this.handleFilter()},handleSizeChange(t){this.pageSize=t,this.currentPage=1,this.fetchFreshData()},handleCurrentChange(t){this.currentPage=t,this.fetchFreshData()},handleEdit(t){this.dialogCategoryOperaion=!0,this.isOperation=!0,t.userPwd=null,this.userAvatar=t.userAvatar,this.data={...t}},handleDelete(t){this.delectedRows.push(t),this.batchDelete()}}},o=r,n=(a("568b"),a("2877")),l=Object(n["a"])(o,s,i,!1,null,"a326f170",null);e["default"]=l.exports},"568b":function(t,e,a){"use strict";a("d1ec")},d1ec:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3741445f.a05a0aab.js.map