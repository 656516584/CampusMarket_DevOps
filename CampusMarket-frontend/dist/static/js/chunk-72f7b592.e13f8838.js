(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72f7b592"],{"355b":function(t,s,e){"use strict";e("365c")},"365c":function(t,s,e){},"4a72":function(t,s,e){"use strict";e("be6d")},be6d:function(t,s,e){},e2c9:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user-space"},[e("div",{staticClass:"user-info-panel"},[e("div",{staticClass:"avatar-wrapper"},[t.userAvatar?e("img",{staticClass:"avatar-img",attrs:{src:t.userAvatar}}):e("i",{staticClass:"el-icon-plus avatar-placeholder"})]),t.selfInfo.id&&t.selfInfo.id!==t.userInfo.id?e("div",{staticClass:"follow-btn"},[e("el-button",{staticStyle:{height:"40px",width:"120px","font-size":"20px"},attrs:{type:t.starFlag?"danger":"primary",size:"medium",round:""},on:{click:t.toggleStar}},[t._v(" "+t._s(t.starFlag?"取消关注":"关注TA")+" ")])],1):t._e(),e("div",{staticClass:"info-item"},[e("p",{staticClass:"label"},[t._v("昵称")]),e("div",{staticClass:"value"},[t._v(t._s(t.userInfo.userName))])]),e("div",{staticClass:"info-item"},[e("p",{staticClass:"label"},[t._v("邮箱")]),e("div",{staticClass:"value"},[t._v(t._s(t.userInfo.userEmail))])]),e("div",{staticClass:"info-item"},[e("p",{staticClass:"label"},[t._v(" 账号状态 "),e("el-tooltip",{attrs:{effect:"dark",content:"一经封号，不可登录，不可使用系统功能",placement:"right"}},[e("i",{staticClass:"el-icon-info"})])],1),e("div",{class:["status-tag",t.userInfo.isLogin?"banned":"normal"]},[e("i",{class:t.userInfo.isLogin?"el-icon-warning-outline":"el-icon-circle-check"}),t._v(" "+t._s(t.userInfo.isLogin?"已被封禁":"正常")+" ")])]),e("div",{staticClass:"info-item"},[e("p",{staticClass:"label"},[t._v(" 留言状态 "),e("el-tooltip",{attrs:{effect:"dark",content:"禁言后，互动功能受限",placement:"right"}},[e("i",{staticClass:"el-icon-info"})])],1),e("div",{class:["status-tag",t.userInfo.isWord?"banned":"normal"]},[e("i",{class:t.userInfo.isWord?"el-icon-warning-outline":"el-icon-circle-check"}),t._v(" "+t._s(t.userInfo.isWord?"已被封禁":"正常")+" ")])]),t.userInfo.isLogin||t.selfInfo.id!==t.userInfo.id?t._e():e("div",{staticClass:"edit-btn"},[e("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(s){return t.handleRouteSelect("/myself")}}},[t._v(" 编辑资料 ")])],1)]),e("div",{staticClass:"product-list"},[t.userInfo.id?e("ProductList",{attrs:{userId:t.userInfo.id}}):t._e()],1)])},a=[],r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"product-list"},[0===t.productList.length?e("el-row",{attrs:{justify:"center"}},[e("el-empty",{attrs:{description:"暂无商品信息"}})],1):e("el-row",{attrs:{gutter:20,justify:"center"}},t._l(t.productList,(function(s,i){return e("el-col",{key:i,attrs:{span:6}},[e("div",{staticClass:"item-product",on:{click:function(e){return t.route(s)}}},[e("div",{staticClass:"cover"},[e("img",{attrs:{src:t.coverListParse(s),alt:"商品封面"}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v(t._s(s.name))]),e("div",{staticClass:"price-row"},[e("span",{staticClass:"decimel-symbol"},[t._v("¥")]),e("span",{staticClass:"price"},[t._v(t._s(s.price))])])])])])})),1)],1)},o=[],c=e("5d2d"),n={name:"ProductList",props:{userId:{type:[Number,String],required:!0}},data(){return{productList:[]}},created(){this.fetchProduct()},methods:{route(t){this.$router.push("/product-detail?productId="+t.id)},handleEdit(t){Object(c["f"])(t),this.$router.push("/edit-product")},async handleDelete(t){const s=await this.$swalConfirm({title:`删除【${t.name}】商品`,text:"删除后不可恢复，是否继续？",icon:"warning"});if(s)try{let s=[t.id];const e=await this.$axios.post("/product/batchDelete",s);if(200===e.data.code)return this.$notify({duration:1e3,title:"信息删除",message:"删除成功",type:"success"}),void this.fetchProduct()}catch(e){this.$notify({duration:2e3,title:"信息删除",message:e,type:"error"}),console.error("商品信息删除异常：",e)}},coverListParse(t){if(null===t.coverList)return;const s=t.coverList.split(",");return s[0]},fetchProduct(){this.$axios.get("/product/getById/"+this.userId,{}).then(t=>{const{data:s}=t;200===s.code&&(this.productList=s.data)}).catch(t=>{console.log("商品查询异常：",t)})}}},l=n,u=(e("355b"),e("2877")),d=Object(u["a"])(l,r,o,!1,null,"67a2b89d",null),h=d.exports,f={components:{ProductList:h},name:"Space",data(){return{selfInfo:{},userInfo:{},userAvatar:"",starFlag:!1}},created(){this.getParam()},methods:{getParam(){const t=this.$route.query;this.userId=Number(t.userId),this.auth()},auth(){this.$axios.get("/user/auth").then(t=>{const{data:s}=t;200===s.code&&(this.selfInfo=s.data,this.fetchUser())}).catch(t=>{this.$notify.error({title:"查询异常",message:t})})},fetchUser(){this.$axios.get("/user/getById/"+this.userId).then(t=>{const{data:s}=t;200!==s.code?this.$router.push("/"):(this.userInfo=s.data,this.userAvatar=s.data.userAvatar,this.fetchStar())}).catch(t=>{this.$notify.error({title:"查询异常",message:t})})},fetchStar(){const t={user1Id:this.selfInfo.id,user2Id:this.userInfo.id};this.$axios.post("/star/query",t).then(t=>{const{data:s}=t;200===s.code&&(this.starFlag=0!==s.total)}).catch(t=>{console.log("商品查询异常：",t)})},handleRouteSelect(t){this.$router.currentRoute.fullPath!==t&&this.$router.push(t)},toggleStar(){this.$axios.post("/star/starOperation/"+this.userInfo.id).then(t=>{const{data:s}=t;200===s.code&&(this.starFlag=s.data,this.$notify({duration:1e3,title:"关注操作成功",message:s.msg,type:"success"}))}).catch(t=>{console.log("关注异常：",t)})}}},p=f,v=(e("4a72"),Object(u["a"])(p,i,a,!1,null,"3090c99e",null));s["default"]=v.exports}}]);
//# sourceMappingURL=chunk-72f7b592.e13f8838.js.map