{"version":3,"sources":["webpack:///./src/views/admin/Message.vue?e71d","webpack:///src/views/admin/Message.vue","webpack:///./src/views/admin/Message.vue?4045","webpack:///./src/views/admin/Message.vue","webpack:///./src/views/admin/Message.vue?31e7"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","on","fetchFreshData","model","value","callback","$$v","searchTime","expression","tableData","scopedSlots","_u","key","fn","scope","row","userAvatar","$event","handleDelete","_v","currentPage","pageSize","totalItems","handleSizeChange","handleCurrentChange","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-3e4e1d3e.c7d90178.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message-page\"},[_c('el-card',{staticClass:\"filter-card\",attrs:{\"shadow\":\"always\"}},[_c('el-form',{staticClass:\"filter-form\",attrs:{\"inline\":true,\"size\":\"small\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"时间范围\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"250px\"},attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},on:{\"change\":_vm.fetchFreshData},model:{value:(_vm.searchTime),callback:function ($$v) {_vm.searchTime=$$v},expression:\"searchTime\"}})],1)],1)],1),_c('el-card',{staticClass:\"table-card\",attrs:{\"shadow\":\"hover\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":true,\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"userAvatar\",\"width\":\"68\",\"label\":\"头像\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-avatar',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"size\":25,\"src\":scope.row.userAvatar}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"userName\",\"width\":\"130\",\"label\":\"接收者\"}}),_c('el-table-column',{attrs:{\"prop\":\"content\",\"label\":\"消息体\"}}),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"width\":\"200\",\"label\":\"发送时间\",\"sortable\":true}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination-wrapper\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"page-sizes\":[10, 20],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalItems},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"message-page\">\n\n        <el-card shadow=\"always\" class=\"filter-card\">\n            <el-form :inline=\"true\" size=\"small\" label-width=\"auto\" class=\"filter-form\">\n                <el-form-item label=\"时间范围\">\n                    <el-date-picker v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\"\n                        end-placeholder=\"结束日期\" @change=\"fetchFreshData\" style=\"width: 250px\" />\n                </el-form-item>\n            </el-form>\n        </el-card>\n        <el-card shadow=\"hover\" class=\"table-card\">\n            <el-table :stripe=\"true\" :data=\"tableData\" style=\"width: 100%\">\n                <el-table-column prop=\"userAvatar\" width=\"68\" label=\"头像\">\n                    <template slot-scope=\"scope\">\n                        <el-avatar :size=\"25\" :src=\"scope.row.userAvatar\" style=\"margin-top: 10px;\"></el-avatar>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"userName\" width=\"130\" label=\"接收者\"></el-table-column>\n                <el-table-column prop=\"content\" label=\"消息体\"></el-table-column>\n                <!-- <el-table-column prop=\"isRead\" width=\"168\" label=\"是否已读\">\n                    <template slot-scope=\"scope\">\n                        <span>{{ scope.row.isRead ? '已读' : '未读' }}</span>\n                    </template>\n                </el-table-column> -->\n                <el-table-column prop=\"createTime\" width=\"200\" label=\"发送时间\" :sortable=\"true\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"120\">\n                    <template slot-scope=\"scope\">\n                        <el-button type=\"text\" size=\"small\" @click=\"handleDelete(scope.row)\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"pagination-wrapper\">\n                <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n                    :current-page=\"currentPage\" :page-size=\"pageSize\" :page-sizes=\"[10, 20]\"\n                    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalItems\" />\n            </div>\n        </el-card>\n    </div>\n    <!-- <el-row style=\"background-color: #FFFFFF;padding: 5px 0;border-radius: 5px;\">\n        <el-row style=\"padding: 10px;margin-left: 5px;\">\n            <el-row>\n                <el-date-picker style=\"width: 216px;margin-right: 5px;\" @change=\"fetchFreshData\" size=\"small\"\n                    v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"发送开始\"\n                    end-placeholder=\"发送结束\">\n                </el-date-picker>\n                <el-input size=\"small\" style=\"width: 166px;\" v-model=\"messageQueryDto.content\" placeholder=\"消息体\"\n                    clearable @clear=\"handleFilterClear\">\n                    <el-button slot=\"append\" @click=\"handleFilter\" icon=\"el-icon-search\"></el-button>\n                </el-input>\n            </el-row>\n        </el-row>\n        <el-row style=\"margin: 0 22px;border-top: 1px solid rgb(245,245,245);\">\n            <el-table :stripe=\"true\" :data=\"tableData\" style=\"width: 100%\">\n                <el-table-column prop=\"userAvatar\" width=\"68\" label=\"头像\">\n                    <template slot-scope=\"scope\">\n                        <el-avatar :size=\"25\" :src=\"scope.row.userAvatar\" style=\"margin-top: 10px;\"></el-avatar>\n                    </template>\n</el-table-column>\n<el-table-column prop=\"userName\" width=\"130\" label=\"接收者\"></el-table-column>\n<el-table-column prop=\"content\" label=\"消息体\"></el-table-column>\n<el-table-column prop=\"isRead\" width=\"168\" label=\"是否已读\">\n    <template slot-scope=\"scope\">\n                        <span>{{ scope.row.isRead ? '已读' : '未读' }}</span>\n                    </template>\n</el-table-column>\n<el-table-column prop=\"createTime\" width=\"200\" label=\"发送时间\"></el-table-column>\n<el-table-column label=\"操作\" width=\"120\">\n    <template slot-scope=\"scope\">\n                        <span class=\"text-button\" @click=\"handleDelete(scope.row)\">删除</span>\n                    </template>\n</el-table-column>\n</el-table>\n<el-pagination style=\"margin:10px 0;float: right;\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n    :current-page=\"currentPage\" :page-sizes=\"[10, 20]\" :page-size=\"pageSize\"\n    layout=\"total, sizes, prev, pager, next, jumper\" :total=\"totalItems\"></el-pagination>\n</el-row>\n</el-row> -->\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            currentPage: 1,\n            pageSize: 10,\n            totalItems: 0,\n            tableData: [],\n            delectedRows: [],\n            searchTime: [],\n            messageQueryDto: {}, // 搜索条件\n        };\n    },\n    created() {\n        this.fetchFreshData();\n    },\n    methods: {\n        // 批量删除数据\n        async batchDelete() {\n            if (!this.delectedRows.length) {\n                this.$message(`未选中任何数据`);\n                return;\n            }\n            const confirmed = await this.$swalConfirm({\n                title: '删除消息数据',\n                text: `删除后不可恢复，是否继续？`,\n                icon: 'warning',\n            });\n            if (confirmed) {\n                try {\n                    let ids = this.delectedRows.map(entity => entity.id);\n                    const response = await this.$axios.post(`/message/batchDelete`, ids);\n                    if (response.data.code === 200) {\n                        this.$notify({\n                            duration: 1000,\n                            title: '信息删除',\n                            message: '删除成功',\n                            type: 'success'\n                        });\n                        this.fetchFreshData();\n                        return;\n                    }\n                } catch (error) {\n                    this.$message.error(\"消息信息删除异常：\", error);\n                    console.error(`消息信息删除异常：`, error);\n                }\n            }\n        },\n        /**\n         * 消息查询\n         */\n        async fetchFreshData() {\n            let startTime = null;\n            let endTime = null;\n            if (this.searchTime != null && this.searchTime.length === 2) {\n                const [startDate, endDate] = await Promise.all(this.searchTime.map(date => date.toISOString()));\n                startTime = `${startDate.split('T')[0]}T00:00:00`;\n                endTime = `${endDate.split('T')[0]}T23:59:59`;\n            }\n            this.messageQueryDto.current = this.currentPage;\n            this.messageQueryDto.size = this.pageSize;\n            this.messageQueryDto.startTime = startTime;\n            this.messageQueryDto.endTime = endTime;\n            this.$axios.post('/message/query', this.messageQueryDto).then(res => {\n                const { data } = res; // 解构\n                if (data.code === 200) {\n                    this.tableData = data.data;\n                    this.totalItems = data.total;\n                }\n            }).catch(error => {\n                this.$notify.error({\n                    title: '查询操作',\n                    message: error\n                });\n            })\n        },\n        handleFilter() {\n            this.currentPage = 1;\n            this.fetchFreshData();\n        },\n        handleFilterClear() {\n            this.handleFilter();\n        },\n        handleSizeChange(val) {\n            this.pageSize = val;\n            this.currentPage = 1;\n            this.fetchFreshData();\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n            this.fetchFreshData();\n        },\n        handleDelete(row) {\n            this.delectedRows.push(row);\n            this.batchDelete();\n        }\n    },\n};\n</script>\n<style scoped lang=\"scss\">\n.message-page {\n    padding: 10px;\n}\n\n.table-card {\n    border-radius: 10px;\n\n    .price-text {\n        font-weight: 600;\n        color: #ff5722;\n    }\n}\n\n.pagination-wrapper {\n    margin-top: 16px;\n    text-align: right;\n}\n\n.filter-card {\n    margin-bottom: 16px;\n    border-radius: 10px;\n\n    .el-form-item {\n        margin-right: 20px;\n    }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=ec123110&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=ec123110&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec123110\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=ec123110&scoped=true&lang=scss&\""],"sourceRoot":""}