{"version":3,"sources":["webpack:///./src/views/user/MyProduct.vue?fc76","webpack:///./src/views/user/MyProduct.vue?82a1","webpack:///src/views/user/MyProduct.vue","webpack:///./src/views/user/MyProduct.vue?2db4","webpack:///./src/views/user/MyProduct.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","productList","length","attrs","_l","product","index","key","on","$event","route","coverListParse","_v","_s","name","price","likeNumber","stopPropagation","handleEdit","handleDelete","staticRenderFns","fetchProduct","methods","$router","push","id","confirmed","$swalConfirm","title","text","icon","ids","response","$axios","post","data","code","$notify","duration","message","type","error","console","coverList","newCoverList","split","then","res","log","component"],"mappings":"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","file":"static/js/chunk-702a11da.8fa21300.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyProduct.vue?vue&type=style&index=0&id=4d4d782a&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-list\"},[(_vm.productList.length === 0)?_c('el-row',{attrs:{\"justify\":\"center\"}},[_c('el-empty',{attrs:{\"description\":\"暂无商品信息\"}})],1):_c('el-row',{attrs:{\"gutter\":20,\"justify\":\"center\"}},_vm._l((_vm.productList),function(product,index){return _c('el-col',{key:index,attrs:{\"span\":6}},[_c('div',{staticClass:\"item-product\",on:{\"click\":function($event){return _vm.route(product)}}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.coverListParse(product),\"alt\":\"product-cover\"}})]),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(product.name))]),_c('div',{staticClass:\"price-row\"},[_c('span',{staticClass:\"price-symbol\"},[_vm._v(\"¥\")]),_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(product.price))]),_c('span',{staticClass:\"love\"},[_vm._v(_vm._s(product.likeNumber)+\" 人想要\")])]),_c('div',{staticClass:\"actions\"},[_c('span',{staticClass:\"edit\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleEdit(product)}}},[_vm._v(\"编辑\")]),_c('span',{staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleDelete(product)}}},[_vm._v(\"删除\")])])])])])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"product-list\">\n    <el-row v-if=\"productList.length === 0\" justify=\"center\">\n      <el-empty description=\"暂无商品信息\"></el-empty>\n    </el-row>\n    <el-row v-else :gutter=\"20\" justify=\"center\">\n      <el-col :span=\"6\" v-for=\"(product, index) in productList\" :key=\"index\">\n        <div class=\"item-product\" @click=\"route(product)\">\n          <div class=\"cover\">\n            <img :src=\"coverListParse(product)\" alt=\"product-cover\" />\n            <!-- <span class=\"bargain\">{{ product.isBargain ? '支持砍价' : '不支持砍价' }}</span> -->\n          </div>\n          <div class=\"info\">\n            <div class=\"title\">{{ product.name }}</div>\n            <div class=\"price-row\">\n              <span class=\"price-symbol\">¥</span>\n              <span class=\"price\">{{ product.price }}</span>\n              <span class=\"love\">{{ product.likeNumber }} 人想要</span>\n            </div>\n            <div class=\"actions\">\n              <span class=\"edit\" @click.stop=\"handleEdit(product)\">编辑</span>\n              <span class=\"delete\" @click.stop=\"handleDelete(product)\">删除</span>\n            </div>\n          </div>\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n<script>\nimport { setProductInfo } from \"@/utils/storage\"\nexport default {\n  name: 'MyProduct',\n  data() {\n    return {\n      productList: []\n    };\n  },\n  created() {\n    this.fetchProduct();\n  },\n  methods: {\n    route(product) {\n      // 跳转商品详情\n      this.$router.push('/product-detail?productId=' + product.id);\n    },\n    /**\n     * 商品编辑\n     * @param {*} product 待处理的商品信息\n     */\n    handleEdit(product) {\n      // 先将待操作商品信息存起来\n      setProductInfo(product);\n      this.$router.push('/edit-product');\n    },\n    /**\n     * 商品删除\n     * @param {*} product 待操作商品信息\n     */\n    async handleDelete(product) {\n      const confirmed = await this.$swalConfirm({\n        title: `删除【${product.name}】商品`,\n        text: `删除后不可恢复，是否继续？`,\n        icon: 'warning',\n      });\n      if (confirmed) {\n        try {\n          let ids = [product.id]\n          const response = await this.$axios.post(`/product/batchDelete`, ids);\n          if (response.data.code === 200) {\n            this.$notify({\n              duration: 1000,\n              title: '信息删除',\n              message: '删除成功',\n              type: 'success'\n            });\n            this.fetchProduct();\n            return;\n          }\n        } catch (error) {\n          this.$notify({\n            duration: 2000,\n            title: '信息删除',\n            message: error,\n            type: 'error'\n          });\n          console.error(`商品信息删除异常：`, error);\n        }\n      }\n\n    },\n    /**\n     * 商品封面图处理\n     * 从字符串转成可用数组\n     * @param {*} product 待处理商品信息\n     */\n    coverListParse(product) {\n      if (product.coverList === null) {\n        return;\n      }\n      const newCoverList = product.coverList.split(',');\n      return newCoverList[0];\n    },\n    /**\n     * 查询用户自己发布的商品信息\n     */\n    fetchProduct() {\n      this.$axios.post('/product/queryUser', {}).then(res => {\n        const { data } = res; // 解构\n        if (data.code === 200) {\n          this.productList = data.data;\n        }\n      }).catch(error => {\n        console.log(\"商品查询异常：\", error);\n      })\n    },\n  }\n};\n</script>\n<style scoped lang=\"scss\">\n.product-list {\n  padding: 30px;\n\n  .item-product {\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.1);\n    background-color: #ffffff;\n    transition: all 0.3s ease;\n    cursor: pointer;\n\n    &:hover {\n      box-shadow: 0 6px 18px rgba(0, 123, 255, 0.2);\n      transform: translateY(-4px);\n    }\n\n    .cover {\n      position: relative;\n\n      img {\n        width: 100%;\n        height: 220px;\n        object-fit: cover;\n        border-bottom: 1px solid #eee;\n      }\n\n      .bargain {\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        background-color: #e3f2fd;\n        color: #007bff;\n        font-size: 12px;\n        font-weight: bold;\n        padding: 4px 8px;\n        border-radius: 6px;\n      }\n    }\n\n    .info {\n      padding: 15px;\n\n      .title {\n        font-size: 18px;\n        font-weight: 600;\n        color: #1f1f1f;\n        margin-bottom: 10px;\n      }\n\n      .price-row {\n        display: flex;\n        align-items: baseline;\n        gap: 8px;\n        margin-bottom: 10px;\n\n        .price-symbol {\n          font-size: 14px;\n          color: #007bff;\n        }\n\n        .price {\n          font-size: 20px;\n          color: #007bff;\n          font-weight: bold;\n        }\n\n        .love {\n          font-size: 13px;\n          color: #888;\n          margin-left: auto;\n        }\n      }\n\n      .actions {\n        display: flex;\n        justify-content: flex-end;\n        gap: 12px;\n\n        .edit,\n        .delete {\n          font-size: 13px;\n          padding: 4px 10px;\n          border-radius: 20px;\n          transition: all 0.3s ease;\n        }\n\n        .edit {\n          background-color: #e3f2fd;\n          color: #007bff;\n\n          &:hover {\n            background-color: #bbdefb;\n          }\n        }\n\n        .delete {\n          background-color: #f8d7da;\n          color: #c82333;\n\n          &:hover {\n            background-color: #f1b0b7;\n          }\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyProduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyProduct.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyProduct.vue?vue&type=template&id=4d4d782a&scoped=true&\"\nimport script from \"./MyProduct.vue?vue&type=script&lang=js&\"\nexport * from \"./MyProduct.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MyProduct.vue?vue&type=style&index=0&id=4d4d782a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d4d782a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}