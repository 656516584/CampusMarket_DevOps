(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be7b0e1c"],{"0ada":function(t,e,s){},"69bc":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-container"},[s("section",{staticClass:"info-section"},[s("div",{staticClass:"info-section-up"},[s("div",{staticClass:"info-left"},[s("div",{staticClass:"name-container"},[s("h1",{staticClass:"product-name"},[t._v(" "+t._s(t.product.name)+" ")]),s("button",{staticClass:"actions btn btn-star",on:{click:t.saveOperation}},[s("i",{class:t.saveFlag?"el-icon-star-on":"el-icon-star-off"})])]),s("div",{staticClass:"price-category"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(t.product.price.toFixed(2)))]),s("span",{staticClass:"category"},[t._v(t._s(t.product.categoryName))])]),s("div",{staticClass:"seller-info",on:{click:function(e){return t.handleRouteSelect("/space?userId="+t.product.userId)}}},[s("img",{staticClass:"seller-avatar",attrs:{src:t.product.userAvatar,alt:"avatar"}}),s("span",{staticClass:"seller-name"},[t._v(t._s(t.product.userName))])]),s("div",{staticClass:"stock-level"},[s("span",[t._v(t._s(t.product.saveNumber)+"人收藏")]),s("span",[t._v(t._s(t.product.viewNumber)+"人浏览")]),s("span",[t._v("库存: "+t._s(t.product.inventory))])]),s("h2",{staticClass:"product-name"},[t._v(" 商品详情 ")]),s("span",{domProps:{innerHTML:t._s(t.product.detail)}})]),s("div",{staticClass:"cover-section"},[t.coverItem?s("div",{staticClass:"cover-display"},[s("i",{staticClass:"el-icon-arrow-left",on:{click:t.coverToLeft}}),s("img",{attrs:{src:t.coverItem,alt:""}}),s("i",{staticClass:"el-icon-arrow-right",on:{click:t.coverToRight}})]):t._e(),s("div",{staticClass:"cover-preview"},t._l(t.coverList,(function(e,o){return s("div",{key:o,staticClass:"cover-thumb",class:{active:t.coverIndex===o},on:{click:function(s){return t.coverSelected(e,o)}}},[s("img",{attrs:{src:e,alt:""}})])})),0)])]),s("div",{staticClass:"info-right"},[s("div",{staticClass:"actions"},[s("button",{staticClass:"btn btn-primary",on:{click:t.likeProduct}},[t._v("我想要")]),s("button",{staticClass:"btn btn-primary",on:{click:t.goToChat}},[t._v("和买家聊天")]),s("button",{staticClass:"btn btn-primary",on:{click:t.buyProduct}},[t._v("立即购买")]),s("button",{staticClass:"btn btn-complaint",on:{click:t.submitComplaint}},[t._v("投诉")])]),null!==t.userInfo?s("div",{staticClass:"evaluation-wrapper"},[s("Evaluations",{attrs:{contentType:"PRODUCT",contentId:t.productId}})],1):t._e()])]),s("el-dialog",{staticClass:"order-dialog",attrs:{"show-close":!1,visible:t.dialogProductOperaion,width:"50%"},on:{"update:visible":function(e){t.dialogProductOperaion=e}}},[s("div",{staticClass:"order-container"},[s("div",{staticClass:"header"},[s("h2",[t._v("确认下单")]),s("p",{staticClass:"sub-text"},[t._v("请核对商品信息后填写下单详情")])]),s("div",{staticClass:"product-info-grid"},[s("img",{staticClass:"avatar",attrs:{src:t.product.userAvatar}}),s("div",{staticClass:"info"},[s("h3",{staticClass:"product-name"},[t._v(t._s(t.product.name))]),s("p",{staticClass:"price"},[s("span",{staticClass:"symbol"},[t._v("￥")]),t._v(t._s(t.product.price))]),s("p",{staticClass:"meta"},[t._v(t._s(t.product.categoryName)+" · "+t._s(t.product.oldLevel)+"成新")]),s("p",{staticClass:"meta"},[t._v("库存："+t._s(t.product.inventory))]),s("p",{staticClass:"owner"},[t._v("卖家："+t._s(t.product.userName))])])]),s("el-divider"),s("div",{staticClass:"form-section"},[s("el-form",{attrs:{"label-position":"top"}},[s("el-form-item",{attrs:{label:"购买数量"}}),s("el-input-number",{attrs:{min:1,max:t.product.inventory},model:{value:t.buyNumber,callback:function(e){t.buyNumber=e},expression:"buyNumber"}}),s("el-form-item",{attrs:{label:"支付方式"}},[s("el-radio-group",{on:{change:t.showPaymentSelection},model:{value:t.paymentMethod,callback:function(e){t.paymentMethod=e},expression:"paymentMethod"}},[s("el-radio",{attrs:{label:"online"}},[t._v(" 线上支付 "),s("transition",{attrs:{name:"el-zoom-in-center"}},["online"===t.paymentMethod?s("i",{staticClass:"el-icon-check check-icon"}):t._e()])],1),s("el-radio",{attrs:{label:"offline"}},[t._v(" 线下支付 "),s("transition",{attrs:{name:"el-zoom-in-center"}},["offline"===t.paymentMethod?s("i",{staticClass:"el-icon-check check-icon"}):t._e()])],1)],1)],1),s("el-form-item",{attrs:{label:"备注信息"}},[s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"填写备注（选填）"},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}})],1)],1)],1)],1),s("span",{staticClass:"footer-actions",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.cannelBuy()}}},[t._v("取消")]),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.buyConfirm()}}},[t._v("下单")])])]),s("el-dialog",{staticClass:"complaint-dialog",attrs:{"show-close":!1,visible:t.showComplaint},on:{"update:visible":function(e){t.showComplaint=e}}},[s("div",{staticClass:"complaint-container"},[s("div",{staticClass:"header"},[s("h2",[t._v("投诉")])]),s("div",{staticClass:"form-section"},[s("el-form",{attrs:{"label-position":"top"}},[s("el-form-item",{attrs:{label:"投诉内容"}},[s("el-input",{attrs:{type:"textarea",rows:4,placeholder:"填写投诉内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)],1)],1)]),s("span",{staticClass:"footer-actions",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.submit()}}},[t._v("提交")]),s("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.cannelComplaint()}}},[t._v("取消")])])])],1)},i=[],n=s("5d2d"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%"}},[s("el-row",{staticStyle:{margin:"5px 0"}},[s("h2",{staticClass:"commentHeader"},[t._v("评论 "+t._s(t.evaluationsCount))]),s("el-row",{staticStyle:{margin:"15px 0"}},[s("el-col",{attrs:{span:2}},[s("el-avatar",{attrs:{src:t.userData.userAvatar}})],1),s("el-col",{attrs:{span:22}},[s("div",{staticClass:"parent-comment",style:{backgroundColor:t.bgColor,height:t.isFocused?"120px":"70px",borderColor:t.isFocused?"#007bff":"transparent"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"comment-parent-input",domProps:{value:t.content},on:{focus:t.onFocus,blur:t.onBlur,input:function(e){e.target.composing||(t.content=e.target.value)}}}),s("div",[s("span",{staticClass:"comment-input-number"},[t._v(t._s(t.content.length)+" / 500")]),s("el-button",{staticClass:"comment-clike",style:{backgroundColor:t.isFocused?"#007bff":"#666",borderColor:t.isFocused?"#007bff":"#666"},attrs:{size:"mini",type:"primary"},on:{click:t.commentClick}},[t._v("评论")])],1)])])],1)],1),s("el-row",{staticStyle:{margin:"5px 0px"}},t._l(t.commentList,(function(e,o){return s("el-row",{key:o,staticStyle:{padding:"10px 0"}},[s("el-row",[s("div",{staticStyle:{cursor:"pointer"},on:{click:function(s){return t.handleRouteSelect("/space?userId="+e.userId)}}},[s("el-col",{attrs:{span:2}},[s("el-avatar",{attrs:{size:"large",src:e.userAvatar}})],1),s("el-col",{attrs:{span:22}},[s("span",{staticStyle:{height:"40px","line-height":"40px","font-size":"16px",color:"#515767"}},[t._v(t._s(e.userName))]),e.userId==t.userId?s("span",{staticClass:"my-body-tag"},[t._v("我")]):t._e()])],1)]),s("el-row",{staticStyle:{padding:"8px 0"}},[s("el-col",{attrs:{span:22,offset:2}},[s("span",{staticStyle:{"font-size":"16px",color:"#252933"}},[t._v(t._s(e.content))])])],1),s("el-row",{staticStyle:{padding:"8px 0"}},[s("el-col",{attrs:{span:22,offset:2}},[s("span",{staticStyle:{"font-size":"14px",color:"#8A919F"}},[t._v(t._s(e.time))]),e.userId==t.userId?s("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不删了",icon:"el-icon-info","icon-color":"red",title:"删除该条评论？"},on:{confirm:function(s){return t.deleteComment(e)}}},[s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},attrs:{slot:"reference"},slot:"reference"},[s("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])]):t._e(),s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},on:{click:function(s){return t.toggleReplyInput(e)}}},[s("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" 回复"),0!=e.childTotal?s("span",[t._v("("+t._s(e.childTotal)+")")]):t._e()]),s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},on:{click:function(s){return t.upvote(e)}}})],1)],1),e.showReplyInput?s("el-row",{staticStyle:{padding:"10px 0"}},[s("el-col",{attrs:{span:22,offset:2}},[s("div",{staticClass:"parent-comment",style:{backgroundColor:t.bgColor,height:"110px",borderColor:"#007bff"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyContent,expression:"replyContent"}],staticClass:"comment-parent-input",attrs:{placeholder:t.replyText},domProps:{value:t.replyContent},on:{input:function(e){e.target.composing||(t.replyContent=e.target.value)}}}),s("div",[s("span",{staticClass:"comment-input-number"},[t._v(t._s(t.replyContent.length)+" / 500")]),s("el-button",{staticClass:"comment-clike",staticStyle:{"background-color":"#007bff","user-select":"none"},attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.submitReply(e)}}},[t._v("评论")])],1)])])],1):t._e(),t._l(e.commentChildVOS,(function(e,o){return s("el-row",{key:o,staticStyle:{padding:"10px 15px","font-size":"16px"}},[s("el-row",[s("el-col",{attrs:{span:22,offset:2}},[s("el-row",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},[s("div",{staticStyle:{cursor:"pointer"},on:{click:function(s){return t.handleRouteSelect("/space?userId="+e.userId)}}},[s("el-avatar",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",src:e.userAvatar}}),s("span",{staticStyle:{color:"#515767",padding:"0 5px"}},[t._v(t._s(e.userName))])],1),e.userId==t.userId?s("span",{staticClass:"my-body-tag"},[t._v("我")]):t._e(),null!=e.replierName?s("span",{staticStyle:{margin:"0 15px",color:"#1c1c1c","user-select":"none","font-size":"12px"}},[t._v(" 回复 ")]):t._e(),null!=e.replierName?s("el-avatar",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",src:e.replierAvatar}}):t._e(),null!=e.replierName?s("span",{staticStyle:{color:"#515767",padding:"0 5px"}},[t._v(t._s(e.replierName))]):t._e(),e.replierId==t.userId?s("span",{staticClass:"my-body-tag"},[t._v("我")]):t._e(),s("span",{staticStyle:{"letter-spacing":"1px","font-size":"16px",color:"#252933","white-space":"normal","margin-left":"5px",padding:"6px 0"}},[t._v(" : "+t._s(e.content)+" ")])],1),s("el-row",{staticStyle:{padding:"10px 0"}},[s("span",{staticStyle:{"font-size":"14px",color:"#8A919F"}},[t._v(t._s(e.time))]),e.userId==t.userId?s("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不删了",icon:"el-icon-info","icon-color":"red",title:"删除该条评论？"},on:{confirm:function(s){return t.deleteComment(e)}}},[s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},attrs:{slot:"reference"},slot:"reference"},[s("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])]):t._e(),s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},on:{click:function(s){return t.toggleReplyInput1(e)}}},[s("i",{staticClass:"el-icon-chat-dot-round"}),t._v(" 回复 ")]),s("span",{staticStyle:{cursor:"pointer","margin-left":"15px","font-size":"14px",color:"#8A919F","user-select":"none"},on:{click:function(s){return t.upvote(e)}}})],1),e.replyInputStatus?s("el-row",{staticStyle:{padding:"10px 0"}},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"parent-comment",style:{backgroundColor:t.bgColor,height:"110px",borderColor:"#007bff"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyChildContent,expression:"replyChildContent"}],staticClass:"comment-parent-input",attrs:{placeholder:t.replyText},domProps:{value:t.replyChildContent},on:{input:function(e){e.target.composing||(t.replyChildContent=e.target.value)}}}),s("div",[s("span",{staticClass:"comment-input-number"},[t._v(t._s(t.replyChildContent.length)+" / 500")]),s("el-button",{staticClass:"comment-clike",staticStyle:{"background-color":"#007bff"},attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.submitReply1(e)}}},[t._v("评论")])],1)])])],1):t._e()],1)],1)],1)}))],2)})),1),s("el-dialog",{staticStyle:{"user-select":"none","border-radius":"5px"},attrs:{title:"我要举报",visible:t.dialogVisibleReport,width:"30%"},on:{"update:visible":function(e){t.dialogVisibleReport=e}}},[t._l(t.reports,(function(e,o){return s("el-row",{key:o,staticStyle:{"margin-top":"10px"}},[s("el-row",{staticStyle:{"padding-bottom":"10px","user-select":"none"}},[t._v("*"+t._s(e.name))]),s("el-row",t._l(e.list,(function(e,o){return s("span",{key:o,on:{click:function(s){return t.reportItemClick(e)}}},[s("button",{staticClass:"reportItem",style:{border:e.isSelected?"1px solid #4b87bc":"1px solid #f4f4f4"}},[t._v(" "+t._s(e.name)+" ")])])})),0)],1)})),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"cannel-btn",on:{click:function(e){t.dialogVisibleReport=!1}}},[t._v("取消")]),s("button",{staticClass:"yes-btn",on:{click:t.operationReport}},[t._v("确定举报")])])],2)],1)},r=[];function c(t){const e=new Date,s=new Date(t),o=(e.getTime()-s.getTime())/1e3;if(o<60)return Math.floor(o)+" 秒前";if(o<3600)return Math.floor(o/60)+" 分钟前";if(o<=86400)return Math.floor(o/3600)+" 小时前";{const t=Math.floor(o/86400);return 1===t?"1 天前":t+" 天前"}}var l={props:{contentId:{type:Number,default:""},contentType:{type:String,default:""}},data(){return{userData:{},noteData:{},commentContent:"",content:"",commentList:[],replyContent:"",id:null,isFocused:!1,bgColor:"rgb(245 245 245)",strLength:"0/500",replyText:"",userId:"",dialogVisibleReport:!1,reports:[],selectdStatus:!1,evaluationsCount:0,comment:{},replyChildContent:""}},watch:{contentId(t,e){t!==e&&this.loadCommentList()},content(){""!==this.content||(this.isFocused=!1)}},created(){this.getUserInfo(),this.loadCommentList()},methods:{handleRouteSelect(t){this.$router.currentRoute.fullPath!==t&&this.$router.push(t)},getUserInfo(){const t=sessionStorage.getItem("userInfo");this.userData=JSON.parse(t),this.userId=this.userData.id},upvote(t){let e=t.upvoteList?t.upvoteList.split(","):[];if(e.length)if(t.upvoteFlag){let t=e.indexOf(this.userData.id.toString());-1!==t&&e.splice(t,1)}else e.includes(this.userData.userId.toString())||e.push(this.userData.userId.toString());let s={id:t.id,upvoteList:e.length?e.join(","):this.userData.id};this.$axios.put("evaluations/update",s).then(s=>{200==s.data.code&&(t.upvoteList=e.join(","),t.upvoteFlag=!t.upvoteFlag,t.upvoteCount+=1)}).catch(t=>{console.error("点赞状态设置异常 -> ",t)})},operationReport(){let t=[];this.reports.forEach(e=>{let s=e.list.filter(t=>t.isSelected);0!=s.length&&(t=s)}),t.length?this.$axios.get(`evaluations-reports/report/${this.comment.id}/${t[0].name}`).then(t=>{this.dialogVisibleReport=!1,200==t.data.code?this.$swal.fire({title:"举报操作",text:"举报成功",icon:"success",showConfirmButton:!1,timer:1100}):this.$swal.fire({title:"举报操作",text:t.data.msg,icon:"error",showConfirmButton:!1,timer:1100})}).catch(t=>{console.error("评论举报异常 -> ",t)}):this.$message("请选中举报项")},reportItemClick(t){this.reports.forEach(t=>{t.list.forEach(t=>{t.isSelected=!1})}),t.isSelected=!0},reportList(){this.$axios.get("evaluations/reportList").then(t=>{200==t.data.code&&(this.reports=[],t.data.data.forEach(t=>{let e={name:t.name},s=[];t.list.forEach(t=>{let e={};e.name=t,e.isSelected=!1,s.push(e)}),e.list=s,this.reports.push(e)}))}).catch(t=>{console.error("举报项加载失败 -> ",t)})},reportComment(t){this.reportList(),this.dialogVisibleReport=!0,this.comment=t},deleteComment(t){this.$axios.delete("evaluations/delete/"+t.id).then(t=>{200==t.data.code&&(this.$message.success(t.data.msg),this.loadCommentList())}).catch(t=>{console.error("评论异常 -> ",t)})},onFocus(){this.isFocused=!0},onBlur(){""!==this.content?this.isFocused=!0:this.isFocused=!1},commentClick(){if(""==this.content)return void this.$swal.fire({title:"内容提示",text:"评论内容为空",icon:"success",showConfirmButton:!1,timer:800});const t={contentType:this.contentType,content:this.content,contentId:this.contentId};this.$axios.post("evaluations/insert",t).then(t=>{200==t.data.code?(this.content="",this.$swal.fire({title:"评论操作",text:"评论成功",icon:"success",showConfirmButton:!1,timer:1100}),setTimeout(()=>{this.loadCommentList()},1100)):this.$swal.fire({title:"评论异常",text:t.data.msg,icon:"error",showConfirmButton:!1,timer:1100})}).catch(t=>{console.error("评论异常 -> ",t)})},toggleReplyInput(t){this.replyText=`回复${t.userName}...`,null==t.showReplyInput&&(t.showReplyInput=!1),t.showReplyInput=!t.showReplyInput},toggleReplyInput1(t){null==t.replyInputStatus&&(t.replyInputStatus=!1),t.replyInputStatus=!t.replyInputStatus},submitReply(t){if(""==this.replyContent)return void this.$message("评论内容不能为空");const e={contentType:this.contentType,content:this.replyContent,contentId:this.contentId,parentId:t.id};this.$axios.post("evaluations/insert",e).then(e=>{200==e.data.code?(this.replyContent="",t.showReplyInput=!1,this.$swal.fire({title:"回复操作",text:"回复成功",icon:"success",showConfirmButton:!1,timer:1300}),setTimeout(()=>{this.loadCommentList()},1300)):this.$swal.fire({title:"评论异常",text:e.data.msg,icon:"error",showConfirmButton:!1,timer:1100})}).catch(t=>{console.error("评论异常 -> ",t)})},submitReply1(t){if(""==this.replyChildContent)return void this.$message("评论内容不能为空");const e={replierId:t.userId,contentType:this.contentType,content:this.replyChildContent,contentId:this.contentId,parentId:t.parentId};this.$axios.post("evaluations/insert",e).then(e=>{200==e.data.code?(this.content="",t.replyInputStatus=!1,this.$swal.fire({title:"回复操作",text:"回复成功",icon:"success",showConfirmButton:!1,timer:1300}),setTimeout(()=>{this.loadCommentList()},1300)):this.$swal.fire({title:"评论异常",text:e.data.msg,icon:"error",showConfirmButton:!1,timer:1100})}).catch(t=>{console.error("评论异常 -> ",t)})},goBack(){this.$router.go(-1)},loadCommentList(){this.$axios.get(`evaluations/list/${this.contentId}/${this.contentType}`).then(t=>{200==t.data.code&&(this.commentList=t.data.data.data,this.evaluationsCount=t.data.data.evaluationsCount,this.commentList.forEach(t=>{t.time=c(t.createTime),t.commentChildVOS.forEach(t=>t.time=c(t.createTime))}))}).catch(t=>{console.error("评论查询异常异常 -> ",t)})}}},u=l,p=(s("8a4b"),s("2877")),d=Object(p["a"])(u,a,r,!1,null,null,null),h=d.exports,m={components:{Evaluations:h},name:"ProductDetail",data(){return{productId:null,product:{},coverList:[],coverIndex:0,coverItem:null,keyInterval:null,saveFlag:!1,dialogProductOperaion:!1,buyNumber:1,detail:"",userInfo:null,content:"",showComplaint:!1,showCheckIcon:!1,paymentMethod:""}},created(){this.getParam(),this.viewOperation()},beforeDestroy(){this.clearBanner()},methods:{showPaymentSelection(){this.$nextTick(()=>{this.showCheckIcon=!0,setTimeout(()=>{this.showCheckIcon=!1},5e3)})},cannelComplaint(){this.showComplaint=!1},submitComplaint(){this.showComplaint=!0},async submit(){const t=Object(n["e"])();await this.$axios.post("/api/complaint/submit",{complainantId:t.id,productId:this.productId,content:this.content}),this.$emit("update:visible",!1),this.$message.success("投诉已提交"),this.cannelComplaint()},viewOperation(){const t=Object(n["e"])();null!==t&&(this.userInfo=t,this.$axios.post("/interaction/view/"+this.productId).then(t=>{const{data:e}=t;200===e.code&&console.log("用户浏览已经处理")}).catch(t=>{console.log("浏览记录异常：",t)}))},handleRouteSelect(t){this.$router.currentRoute.fullPath!==t&&this.$router.push(t)},buyConfirm(){const t={productId:this.product.id,buyNumber:this.buyNumber,detail:this.detail};this.$axios.post("/product/buyProduct",t).then(t=>{const{data:e}=t;200===e.code?(this.$notify({duration:1e3,title:"下单操作",message:e.msg,type:"success"}),this.fetchProduct(this.product.id),this.cannelBuy()):this.$notify({duration:2e3,title:"下单操作",message:e.msg,type:"error"})}).catch(t=>{this.$notify({duration:2e3,title:"下单操作",message:t,type:"error"}),console.log("商品下单异常：",t)})},cannelBuy(){this.dialogProductOperaion=!1,this.buyNumber=1},buyProduct(){const t=Object(n["e"])();if(null===t)return this.$notify({duration:1e3,title:"未登录",message:"登录后才可操作",type:"info"}),void this.$router.push("/login");this.dialogProductOperaion=!0},likeProduct(){this.$axios.post("/interaction/likeProduct/"+this.product.id).then(t=>{const{data:e}=t;200===e.code?this.$notify({duration:1e3,title:"想要操作通知",message:e.msg,type:"success"}):(this.$notify({duration:2e3,title:"想要操作通知",message:e.msg,type:"info"}),this.$router.push("/login"))}).catch(t=>{console.log("商品---想要---异常：",t)})},goToChat(){this.$router.push({path:"/chat",query:{ReceiverId:this.product.userId}})},querySaveStatus(){const t=Object(n["e"])();if(null===t)return void console.log("用户未登录");const e={userId:t.id,productId:this.product.id,type:1};this.$axios.post("/interaction/query",e).then(t=>{const{data:e}=t;200===e.code&&(this.saveFlag=0!==e.total)}).catch(t=>{console.log("商品查询异常：",t)})},saveOperation(){const t=Object(n["e"])();if(null===t)return this.$notify({duration:1e3,title:"未登录",message:"登录后才可操作",type:"info"}),void this.$router.push("/login");this.$axios.post("/interaction/saveOperation/"+this.product.id).then(t=>{const{data:e}=t;200===e.code&&(this.saveFlag=e.data,this.$notify({duration:1e3,title:"收藏操作成功",message:e.msg,type:"success"}))}).catch(t=>{console.log("商品查询异常：",t)})},clearBanner(){this.keyInterval&&(clearInterval(this.keyInterval),this.keyInterval=null)},startBanner(){this.keyInterval=setInterval(()=>{this.coverIndex===this.coverList.length-1?this.coverIndex=0:this.coverIndex=this.coverIndex+1,this.coverItem=this.coverList[this.coverIndex]},5e3)},coverToLeft(){0===this.coverIndex?this.coverIndex=this.coverList.length-1:this.coverIndex=this.coverIndex-1,this.coverItem=this.coverList[this.coverIndex]},coverToRight(){this.coverIndex===this.coverList.length-1?this.coverIndex=0:this.coverIndex=this.coverIndex+1,this.coverItem=this.coverList[this.coverIndex]},coverSelected(t,e){this.coverItem=t,this.coverIndex=e},getParam(){const t=this.$route.query;this.productId=Number(t.productId),this.fetchProduct(this.productId)},coverListParse(t){null!==t.coverList&&(this.coverList=t.coverList.split(","),this.coverItem=this.coverList[0],this.startBanner())},fetchProduct(t){this.$axios.post("/product/query",{id:t}).then(t=>{const{data:e}=t;200===e.code&&(this.product=e.data[0],this.coverListParse(this.product),this.querySaveStatus())}).catch(t=>{console.log("商品查询异常：",t)})}}},v=m,f=(s("9f7a"),Object(p["a"])(v,o,i,!1,null,"89bdff6a",null));e["default"]=f.exports},"6a9d":function(t,e,s){},"8a4b":function(t,e,s){"use strict";s("6a9d")},"9f7a":function(t,e,s){"use strict";s("0ada")}}]);
//# sourceMappingURL=chunk-be7b0e1c.a06f3ff3.js.map