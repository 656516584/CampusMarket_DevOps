(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e5e4a70"],{6158:function(t,e,i){"use strict";i("d573")},"86d6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"post-product-wrapper"},[i("h2",{staticClass:"title"},[t._v("发布新商品")]),i("div",{staticClass:"form-section"},[i("el-card",{staticClass:"card"},[i("p",{staticClass:"label"},[t._v("商品名")]),i("el-input",{attrs:{placeholder:"请输入商品名",clearable:""},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}}),i("p",{staticClass:"label"},[t._v("新旧程度")]),i("el-input-number",{attrs:{min:1,max:10},on:{change:t.handleChange},model:{value:t.oldLevel,callback:function(e){t.oldLevel=e},expression:"oldLevel"}}),i("p",{staticClass:"label"},[t._v("价格")]),i("el-input",{attrs:{placeholder:"请输入价格","prefix-icon":"el-icon-money",clearable:""},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),i("el-card",{staticClass:"card"},[i("p",{staticClass:"label"},[t._v("产品图")]),i("el-upload",{attrs:{action:"https://market.charactex.com:11451/api/campus-product-sys/v1.0/file/upload","list-type":"picture-card","on-success":t.handlePictureCardSuccess,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),i("el-card",{staticClass:"card"},[i("p",{staticClass:"label"},[t._v("商品类别")]),i("div",{staticClass:"category-list"},t._l(t.categoryList,(function(e,s){return i("span",{key:s,staticClass:"category-item",class:{selected:t.categorySelected.id===e.id},on:{click:function(i){return t.categoryClick(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0),i("p",{staticClass:"label"},[t._v("库存")]),i("el-input-number",{attrs:{min:1,max:1e4},on:{change:t.handleInventoryChange},model:{value:t.inventory,callback:function(e){t.inventory=e},expression:"inventory"}})],1),i("el-card",{staticClass:"card"},[i("p",{staticClass:"label"},[t._v("商品详情")]),i("Editor",{attrs:{height:"300px",receiveContent:t.product.detail},on:{"on-receive":t.onReceive}})],1)],1),i("div",{staticClass:"action-bar"},[i("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.postProduct}},[t._v("发布商品")])],1)])},a=[],o=i("ceb0"),c={components:{Editor:o["a"]},name:"PostProduct",data(){return{oldLevel:9,inventory:1,product:{},categorySelected:{},dialogImageUrl:"",dialogVisible:!1,coverList:[],categoryList:[]}},created(){this.fetchCategoryList()},methods:{postProduct(){void 0!==this.product.name?void 0!==this.product.price?0!==this.coverList.length?(void 0===this.product.inventory&&(this.product.inventory=1),void 0===this.product.oldLevel&&(this.product.oldLevel=9),this.product.coverList=this.coverList.join(","),this.$axios.post("/product/save",this.product).then(t=>{const{data:e}=t;200===e.code&&this.$notify.success({title:"发布操作",message:e.msg})}).catch(t=>{this.$notify.error({title:"发布操作",message:t}),console.log("新增商品异常:",t)})):this.$notify.info({duration:1e3,title:"上传提醒",message:"请上传封面"}):this.$notify.info({duration:1e3,title:"填写提醒",message:"商品价格不能为空"}):this.$notify.info({duration:1e3,title:"填写提醒",message:"商品标题不能为空"})},onReceive(t){this.product.detail=t},categoryClick(t){this.categorySelected=t,this.product.categoryId=t.id},fetchCategoryList(){this.$axios.post("/category/query",{}).then(t=>{const{data:e}=t;200===e.code&&(this.categoryList=e.data,this.categoryClick(this.categoryList[0]))}).catch(t=>{console.log("查询商品类别信息异常:",t)})},handleChange(){console.log("新旧程度：",this.oldLevel),this.product.oldLevel=this.oldLevel},handleInventoryChange(){console.log("库存：",this.inventory),this.product.inventory=this.inventory},handlePictureCardSuccess(t,e){this.coverList.push(t.data)},handleRemove(t,e){this.coverList=e,console.log(t,e)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},l=c,r=(i("6158"),i("2877")),n=Object(r["a"])(l,s,a,!1,null,"40876ef0",null);e["default"]=n.exports},d573:function(t,e,i){}}]);
//# sourceMappingURL=chunk-9e5e4a70.f35ea265.js.map