(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41225d4e"],{2241:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"logo"},[a("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"/logo.png",fit:"fill"}}),t.flag?t._e():a("div",[a("span",{style:{color:t.bag,display:"block"}},[t._v(t._s(t.name))])])],1)},o=[],i={name:"Logo",data(){return{}},props:{name:{type:String,default:"系统"},flag:{type:Boolean,required:!1},bag:{type:String,default:"rgb(255,255,255)"}},created(){},methods:{}},n=i,r=(a("471f"),a("2877")),c=Object(r["a"])(n,s,o,!1,null,"169c8568",null);e["a"]=c.exports},"3d12":function(t,e,a){},"471f":function(t,e,a){"use strict";a("3d12")},ad5d:function(t,e,a){"use strict";a("cd9d")},cd9d:function(t,e,a){},ede4:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-page"},[a("div",{staticClass:"login-card"},[a("h2",{staticClass:"title"},[t._v("校园跳蚤交易平台")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.act,expression:"act"}],staticClass:"input",attrs:{placeholder:"请输入账号"},domProps:{value:t.act},on:{input:function(e){e.target.composing||(t.act=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"input",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),a("button",{staticClass:"login-btn",on:{click:t.login}},[t._v("立即登录")]),a("p",{staticClass:"tip"},[t._v(" 还没有账号？ "),a("span",{staticClass:"link",on:{click:t.toDoRegister}},[t._v("注册新用户")])])])])},o=[],i=a("b775"),n=a("5d2d"),r=a("8237"),c=a.n(r),l=a("2241");const d=1300;var u={name:"Login",components:{Logo:l["a"]},data(){return{act:"",pwd:"",colorLogo:"rgb(38,38,38)"}},methods:{toDoRegister(){this.$router.push("/register")},async login(){if(!this.act||!this.pwd)return void this.$swal.fire({title:"填写校验",text:"账号或密码不能为空",icon:"error",showConfirmButton:!1,timer:d});const t=c()(c()(this.pwd)),e={userAccount:this.act,userPwd:t};try{const{data:t}=await i["a"].post("user/login",e);if(200!==t.code)return void this.$swal.fire({title:"登录失败",text:t.msg,icon:"error",showConfirmButton:!1,timer:d});Object(n["h"])(t.data.token),setTimeout(()=>{const{role:e}=t.data;this.navigateToRole(e)},d)}catch(a){console.error("登录请求错误:",a),this.$message.error("登录请求出错，请重试！")}},navigateToRole(t){switch(t){case 1:this.$router.push("/admin");break;case 2:console.log("用户角色：",t),this.$router.push("/user");break;default:console.warn("未知的角色类型:",t);break}}}},p=u,g=(a("ad5d"),a("2877")),h=Object(g["a"])(p,s,o,!1,null,"1863b29e",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-41225d4e.6da90e4e.js.map