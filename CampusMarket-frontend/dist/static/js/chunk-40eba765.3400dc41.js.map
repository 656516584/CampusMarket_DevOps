{"version":3,"sources":["webpack:///./src/views/admin/ComplaintManage.vue?0bb6","webpack:///src/views/admin/ComplaintManage.vue","webpack:///./src/views/admin/ComplaintManage.vue?3a32","webpack:///./src/views/admin/ComplaintManage.vue","webpack:///./src/views/admin/ComplaintManage.vue?a2ea"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","model","value","callback","$$v","searchTime","expression","complaints","scopedSlots","_u","key","fn","scope","row","status","_v","_e","on","$event","handle","id","complainantId","targetId","currentPage","pageSize","totalItems","handleSizeChange","handleCurrentChange","staticRenderFns","fetchFreshData","methods","$axios","get","then","res","data","$notify","error","title","message","val","post","$message","success","component"],"mappings":"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","file":"static/js/chunk-40eba765.3400dc41.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"complaint-page\"},[_c('el-card',{staticClass:\"filter-card\",attrs:{\"shadow\":\"always\"}},[_c('el-form',{staticClass:\"filter-form\",attrs:{\"inline\":true,\"size\":\"small\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"时间范围\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"250px\"},attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.searchTime),callback:function ($$v) {_vm.searchTime=$$v},expression:\"searchTime\"}})],1)],1)],1),_c('el-card',{staticClass:\"table-card\",attrs:{\"shadow\":\"hover\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":true,\"data\":_vm.complaints}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"sortable\":true}}),_c('el-table-column',{attrs:{\"prop\":\"complainantId\",\"label\":\"投诉人\"}}),_c('el-table-column',{attrs:{\"prop\":\"targetId\",\"label\":\"被投诉人\"}}),_c('el-table-column',{attrs:{\"prop\":\"content\",\"label\":\"内容\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"status-text\"},[(scope.row.status === 'rejected')?_c('div',{staticClass:\"rejected\"},[_vm._v(\" 已驳回 \")]):_vm._e(),(scope.row.status === 'resolved')?_c('div',{staticClass:\"resolved\"},[_vm._v(\" 已通过 \")]):_vm._e()])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"font-size\":\"large\"},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handle(scope.row.id, 'resolved', scope.row.complainantId, scope.row.targetId)}}},[_vm._v(\"通过\")]),_c('el-button',{staticStyle:{\"font-size\":\"large\"},attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handle(scope.row.id, 'rejected', scope.row.complainantId, scope.row.targetId)}}},[_vm._v(\"驳回\")])]}}])})],1)],1),_c('div',{staticClass:\"pagination-wrapper\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"page-sizes\":[10, 20],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totalItems},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"complaint-page\">\n    <el-card shadow=\"always\" class=\"filter-card\">\n      <el-form :inline=\"true\" size=\"small\" label-width=\"auto\" class=\"filter-form\">\n        <el-form-item label=\"时间范围\">\n          <!-- <el-date-picker v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\" @change=\"fetchFreshData\" style=\"width: 250px\" /> -->\n          <el-date-picker v-model=\"searchTime\" type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\" style=\"width: 250px\" />\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <el-card shadow=\"hover\" class=\"table-card\">\n      <el-table :stripe=\"true\" :data=\"complaints\" style=\"width: 100%\">\n        <el-table-column prop=\"id\" label=\"ID\" :sortable=\"true\" />\n        <el-table-column prop=\"complainantId\" label=\"投诉人\" />\n        <el-table-column prop=\"targetId\" label=\"被投诉人\" />\n        <el-table-column prop=\"content\" label=\"内容\" />\n        <el-table-column label=\"状态\">\n          <template slot-scope=\"scope\">\n            <span class=\"status-text\">\n              <div v-if=\"scope.row.status === 'rejected'\" class=\"rejected\">\n                已驳回\n              </div>\n              <div v-if=\"scope.row.status === 'resolved'\" class=\"resolved\">\n                已通过\n              </div>\n\n            </span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"120\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"text\" size=\"small\" style=\"font-size: large;\"\n              @click=\"handle(scope.row.id, 'resolved', scope.row.complainantId, scope.row.targetId)\">通过</el-button>\n            <el-button type=\"text\" size=\"small\" style=\"font-size: large;\"\n              @click=\"handle(scope.row.id, 'rejected', scope.row.complainantId, scope.row.targetId)\">驳回</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n    <div class=\"pagination-wrapper\">\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"currentPage\"\n        :page-size=\"pageSize\" :page-sizes=\"[10, 20]\" layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totalItems\" />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      complaints: [],\n      pageSize: 10,\n      currentPage: 1,\n      totalItems: 0,\n      searchTime: [],\n    };\n  },\n  created() {\n    this.fetchFreshData();\n  },\n  methods: {\n    fetchFreshData() {\n      this.$axios.get('/api/complaint/all').then(res => {\n        this.complaints = res.data;\n        // console.log(res.data);\n      }).catch(error => {\n        this.$notify.error({\n          title: '查询操作',\n          message: error\n        });\n      });\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.fetchFreshData();\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.fetchFreshData();\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.fetchFreshData();\n    },\n    handle(id, status, complainantId, targetId) {\n      // console.log(id, status, complainantId, targetId);\n      this.$axios.post('/api/complaint/handle', null, { params: { id, status, complainantId, targetId } }).then(res => {\n        this.fetchFreshData();\n        this.$message.success('处理完成');\n      }).catch(error => {\n        this.$notify.error({\n          title: '修改操作',\n          message: error\n        });\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.complaint-page {\n  padding: 10px;\n}\n\n.filter-card {\n  margin-bottom: 16px;\n  border-radius: 10px;\n\n  .el-form-item {\n    margin-right: 20px;\n  }\n}\n\n.pagination-wrapper {\n  margin-top: 16px;\n  text-align: right;\n}\n\n.table-card {\n  border-radius: 10px;\n\n  .status-text {\n    font-weight: 600;\n\n    .rejected {\n      color: #ff5722;\n    }\n\n    .resolved {\n      color: #0ce730;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComplaintManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComplaintManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ComplaintManage.vue?vue&type=template&id=ec1946dc&scoped=true&\"\nimport script from \"./ComplaintManage.vue?vue&type=script&lang=js&\"\nexport * from \"./ComplaintManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ComplaintManage.vue?vue&type=style&index=0&id=ec1946dc&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec1946dc\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ComplaintManage.vue?vue&type=style&index=0&id=ec1946dc&scoped=true&lang=scss&\""],"sourceRoot":""}