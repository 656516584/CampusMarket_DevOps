{"version":3,"sources":["webpack:///./src/views/user/PostProduct.vue?ebf5","webpack:///./src/views/user/PostProduct.vue?4e4f","webpack:///src/views/user/PostProduct.vue","webpack:///./src/views/user/PostProduct.vue?f870","webpack:///./src/views/user/PostProduct.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","product","callback","$$v","$set","expression","on","handleChange","oldLevel","handlePictureCardSuccess","handlePictureCardPreview","handleRemove","dialogVisible","$event","dialogImageUrl","_l","category","index","key","class","selected","categorySelected","id","categoryClick","_s","name","handleInventoryChange","inventory","detail","onReceive","postProduct","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-9e5e4a70.f35ea265.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostProduct.vue?vue&type=style&index=0&id=40876ef0&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-product-wrapper\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"发布新商品\")]),_c('div',{staticClass:\"form-section\"},[_c('el-card',{staticClass:\"card\"},[_c('p',{staticClass:\"label\"},[_vm._v(\"商品名\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入商品名\",\"clearable\":\"\"},model:{value:(_vm.product.name),callback:function ($$v) {_vm.$set(_vm.product, \"name\", $$v)},expression:\"product.name\"}}),_c('p',{staticClass:\"label\"},[_vm._v(\"新旧程度\")]),_c('el-input-number',{attrs:{\"min\":1,\"max\":10},on:{\"change\":_vm.handleChange},model:{value:(_vm.oldLevel),callback:function ($$v) {_vm.oldLevel=$$v},expression:\"oldLevel\"}}),_c('p',{staticClass:\"label\"},[_vm._v(\"价格\")]),_c('el-input',{attrs:{\"placeholder\":\"请输入价格\",\"prefix-icon\":\"el-icon-money\",\"clearable\":\"\"},model:{value:(_vm.product.price),callback:function ($$v) {_vm.$set(_vm.product, \"price\", $$v)},expression:\"product.price\"}})],1),_c('el-card',{staticClass:\"card\"},[_c('p',{staticClass:\"label\"},[_vm._v(\"产品图\")]),_c('el-upload',{attrs:{\"action\":\"https://market.charactex.com:11451/api/campus-product-sys/v1.0/file/upload\",\"list-type\":\"picture-card\",\"on-success\":_vm.handlePictureCardSuccess,\"on-preview\":_vm.handlePictureCardPreview,\"on-remove\":_vm.handleRemove}},[_c('i',{staticClass:\"el-icon-plus\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_c('el-card',{staticClass:\"card\"},[_c('p',{staticClass:\"label\"},[_vm._v(\"商品类别\")]),_c('div',{staticClass:\"category-list\"},_vm._l((_vm.categoryList),function(category,index){return _c('span',{key:index,staticClass:\"category-item\",class:{ selected: _vm.categorySelected.id === category.id },on:{\"click\":function($event){return _vm.categoryClick(category)}}},[_vm._v(\" \"+_vm._s(category.name)+\" \")])}),0),_c('p',{staticClass:\"label\"},[_vm._v(\"库存\")]),_c('el-input-number',{attrs:{\"min\":1,\"max\":10000},on:{\"change\":_vm.handleInventoryChange},model:{value:(_vm.inventory),callback:function ($$v) {_vm.inventory=$$v},expression:\"inventory\"}})],1),_c('el-card',{staticClass:\"card\"},[_c('p',{staticClass:\"label\"},[_vm._v(\"商品详情\")]),_c('Editor',{attrs:{\"height\":\"300px\",\"receiveContent\":_vm.product.detail},on:{\"on-receive\":_vm.onReceive}})],1)],1),_c('div',{staticClass:\"action-bar\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.postProduct}},[_vm._v(\"发布商品\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"post-product-wrapper\">\n        <h2 class=\"title\">发布新商品</h2>\n\n        <div class=\"form-section\">\n            <el-card class=\"card\">\n                <p class=\"label\">商品名</p>\n                <el-input v-model=\"product.name\" placeholder=\"请输入商品名\" clearable />\n\n                <p class=\"label\">新旧程度</p>\n                <el-input-number v-model=\"oldLevel\" @change=\"handleChange\" :min=\"1\" :max=\"10\" />\n\n                <p class=\"label\">价格</p>\n                <el-input v-model=\"product.price\" placeholder=\"请输入价格\" prefix-icon=\"el-icon-money\" clearable />\n            </el-card>\n\n            <el-card class=\"card\">\n                <p class=\"label\">产品图</p>\n                <el-upload action=\"https://market.charactex.com:11451/api/campus-product-sys/v1.0/file/upload\"\n                    list-type=\"picture-card\" :on-success=\"handlePictureCardSuccess\"\n                    :on-preview=\"handlePictureCardPreview\" :on-remove=\"handleRemove\">\n                    <i class=\"el-icon-plus\"></i>\n                </el-upload>\n                <el-dialog :visible.sync=\"dialogVisible\">\n                    <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\n                </el-dialog>\n            </el-card>\n\n            <el-card class=\"card\">\n                <p class=\"label\">商品类别</p>\n                <div class=\"category-list\">\n                    <span class=\"category-item\" :class=\"{ selected: categorySelected.id === category.id }\"\n                        @click=\"categoryClick(category)\" v-for=\"(category, index) in categoryList\" :key=\"index\">\n                        {{ category.name }}\n                    </span>\n                </div>\n\n                <p class=\"label\">库存</p>\n                <el-input-number v-model=\"inventory\" @change=\"handleInventoryChange\" :min=\"1\" :max=\"10000\" />\n            </el-card>\n\n            <el-card class=\"card\">\n                <p class=\"label\">商品详情</p>\n                <Editor height=\"300px\" :receiveContent=\"product.detail\" @on-receive=\"onReceive\" />\n            </el-card>\n        </div>\n\n        <div class=\"action-bar\">\n            <el-button type=\"primary\" size=\"large\" @click=\"postProduct\">发布商品</el-button>\n        </div>\n    </div>\n</template>\n<script>\nimport Editor from \"@/components/Editor\"\nexport default {\n    components: { Editor },\n    name: 'PostProduct',\n    data() {\n        return {\n            oldLevel: 9, // 默认九成新\n            inventory: 1, // 默认库存\n            product: {},\n            categorySelected: {}, // 当前选中的商品类别\n            dialogImageUrl: '',\n            dialogVisible: false,\n            coverList: [],\n            categoryList: []\n        };\n    },\n    created() {\n        this.fetchCategoryList();\n    },\n    methods: {\n        /**\n         * 发布商品\n         */\n        postProduct() {\n            if (this.product.name === undefined) {\n                this.$notify.info({\n                    duration: 1000,\n                    title: '填写提醒',\n                    message: '商品标题不能为空'\n                });\n                return;\n            }\n            if (this.product.price === undefined) {\n                this.$notify.info({\n                    duration: 1000,\n                    title: '填写提醒',\n                    message: '商品价格不能为空'\n                });\n                return;\n            }\n            if (this.coverList.length === 0) {\n                this.$notify.info({\n                    duration: 1000,\n                    title: '上传提醒',\n                    message: '请上传封面'\n                });\n                return;\n            }\n            if (this.product.inventory === undefined)\n                this.product.inventory = 1;\n            if (this.product.oldLevel === undefined)\n                this.product.oldLevel = 9;\n            this.product.coverList = this.coverList.join(',');\n            // 商品封面需要处理\n            this.$axios.post('/product/save', this.product).then(res => {\n                const { data } = res;\n                if (data.code === 200) {\n                    this.$notify.success({\n                        title: '发布操作',\n                        message: data.msg\n                    });\n                    // 后续清除之后，跳转我的商品页面\n                    // this.product = {};\n                }\n            }).catch(error => {\n                this.$notify.error({\n                    title: '发布操作',\n                    message: error\n                });\n                console.log(\"新增商品异常:\", error);\n            });\n        },\n        /**\n         * 富文本编辑器回调内容\n         * @param {*} detail \n         */\n        onReceive(detail) {\n            this.product.detail = detail;\n        },\n        /**\n         * 商品分类选中事件\n         * @param {*} category 商品分类\n         */\n        categoryClick(category) {\n            this.categorySelected = category;\n            this.product.categoryId = category.id;\n        },\n        /**\n         * 查询商品类别\n         */\n        fetchCategoryList() {\n            this.$axios.post('/category/query', {}).then(res => {\n                const { data } = res;\n                if (data.code === 200) {\n                    this.categoryList = data.data;\n                    // 默认选中第一项\n                    this.categoryClick(this.categoryList[0]);\n                }\n            }).catch(error => {\n                console.log(\"查询商品类别信息异常:\", error);\n            });\n        },\n        /**\n         * 新旧程度选择事件\n         */\n        handleChange() {\n            console.log(\"新旧程度：\", this.oldLevel);\n            this.product.oldLevel = this.oldLevel;\n        },\n        /**\n         * 库存设置事件\n         */\n        handleInventoryChange() {\n            console.log(\"库存：\", this.inventory);\n            this.product.inventory = this.inventory;\n        },\n        /**\n         * 封面上传成功响应事件\n         * @param {*} file \n         * @param {*} fileList \n         */\n        handlePictureCardSuccess(file, fileList) {\n            this.coverList.push(file.data);\n        },\n        handleRemove(file, fileList) {\n            this.coverList = fileList\n            console.log(file, fileList);\n        },\n        handlePictureCardPreview(file) {\n            this.dialogImageUrl = file.url;\n            this.dialogVisible = true;\n        }\n    }\n};\n</script>\n<style scoped lang=\"scss\">\n.post-product-wrapper {\n    padding: 30px;\n    max-width: 900px;\n    margin: auto;\n    background: #f9fcff;\n    font-family: 'Helvetica Neue', sans-serif;\n\n    .title {\n        text-align: center;\n        font-size: 26px;\n        color: #3178c6;\n        margin-bottom: 30px;\n    }\n\n    .form-section {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n    }\n\n    .card {\n        padding: 20px;\n        background: white;\n        box-shadow: 0 4px 8px rgba(0, 123, 255, 0.1);\n        border-radius: 12px;\n    }\n\n    .label {\n        font-weight: 600;\n        color: #2c3e50;\n        margin-top: 10px;\n        margin-bottom: 6px;\n    }\n\n    .category-list {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 10px;\n    }\n\n    .category-item {\n        padding: 6px 16px;\n        background-color: #e4f1ff;\n        border-radius: 20px;\n        font-size: 14px;\n        cursor: pointer;\n        transition: 0.3s all;\n        color: #3178c6;\n        border: 1px solid transparent;\n    }\n\n    .category-item.selected {\n        background-color: #3178c6;\n        color: white;\n        border: 1px solid #1f5fa8;\n    }\n\n    .category-item:hover {\n        background-color: #d0eaff;\n    }\n\n    .action-bar {\n        text-align: center;\n        margin-top: 30px;\n    }\n\n    .el-button {\n        padding: 14px 40px;\n        font-size: 16px;\n        background-color: #3178c6;\n        border-color: #3178c6;\n\n        &:hover {\n            background-color: #2563b9;\n            border-color: #2563b9;\n        }\n    }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostProduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostProduct.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostProduct.vue?vue&type=template&id=40876ef0&scoped=true&\"\nimport script from \"./PostProduct.vue?vue&type=script&lang=js&\"\nexport * from \"./PostProduct.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostProduct.vue?vue&type=style&index=0&id=40876ef0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40876ef0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}